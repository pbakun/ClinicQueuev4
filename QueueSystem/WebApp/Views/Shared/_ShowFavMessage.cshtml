@model List<Entities.Models.FavoriteAdditionalMessage>

<form method="post" asp-area="Doctor" asp-controller="Doctor">
    <div class="container">
        @if(@Model.Count > 0){
        <div class="list-group">
            @foreach(var item in Model){
            <table>
                <tr>
                    <td>
                        <a class="list-group-item list-group-item-action anchorItemClicked" 
                           @*asp-action="PickFavMessagePost"
                           asp-route-messageId="@item.Id"*@ id="@item.Id">
                            @item.Message
                        </a>
                    </td>
                    <td>
                        <a class="btn btn-danger p-1" asp-action="DeleteFavMessage" asp-route-messageId="@item.Id">
                            <i class="far fa-trash-alt text-light"></i>
                        </a>
                    </td>
                </tr>
            </table>
           
            }
        </div>
        }
        else 
        {
        <p>Brak ulubionych wiadomości.</p>
        }
    </div>
</form>


<script type="text/javascript">

    $(".anchorItemClicked").click(function () {
        var formMessageId = $(this).attr("id");
        $.ajax({
            type: 'POST',
            url: '/Doctor/Doctor/PickFavMessagePost',
            cache: false,
            contentType: "application/json; charset=utf-8",
            datatype: "text",
            data: JSON.stringify(formMessageId),
            success: function (response) {
                //additionalInfo and favMessageModal defined in Doctor Index.cshtml
                $("#additionalInfo").val(response);
                $("#favMessageModal").modal('hide');
            },
            error: function (error) {
                console.log(error)
                console.log("Error while POST of PickFavMessage")
            }
        });
    });



</script>